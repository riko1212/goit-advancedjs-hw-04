{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["const renderHTMLElement = (node, content, position = 'beforeend') => {\r\n  node.insertAdjacentHTML(position, content);\r\n};\r\n\r\nconst removeInnerHTMLElement = node => {\r\n  node.innerHTML = '';\r\n};\r\n\r\nexport const renderSearchForm = node => {\r\n  const content = `\r\n    <form class=\"search-form\" id=\"search-form\">\r\n      <input\r\n        type=\"text\"\r\n        name=\"search\"\r\n        autocomplete=\"off\"\r\n        placeholder=\"Search images...\"\r\n      />\r\n      <button type=\"submit\" class=\"button\">Search</button>\r\n    </form>\r\n  `;\r\n\r\n  renderHTMLElement(node, content);\r\n};\r\n\r\nexport const renderGalleryWrapper = node => {\r\n  const content = `<div class=\"gallery\" id=\"gallery\"></div>`;\r\n\r\n  renderHTMLElement(node, content);\r\n};\r\n\r\nexport const renderGalleryItems = (node, images) => {\r\n  const content = images\r\n    .map(\r\n      image => `\r\n    <div class=\"gallery-item\">\r\n      <a href=\"${image.largeImageURL}\">\r\n        <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" loading=\"lazy\" />\r\n      </a>\r\n      <div class=\"gallery-item-info\">\r\n        <div>\r\n          <b>Likes</b>\r\n          ${image.likes}\r\n        </div>\r\n        <div>\r\n          <b>Views</b>\r\n          ${image.views}\r\n        </div>\r\n        <div>\r\n          <b>Comments</b>\r\n          ${image.comments}\r\n        </div>\r\n        <div>\r\n          <b>Downloads</b>\r\n          ${image.downloads}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  `\r\n    )\r\n    .join('');\r\n\r\n  renderHTMLElement(node, content);\r\n};\r\n\r\nexport const renderImages = (node, images) => {\r\n  renderGalleryItems(node, images);\r\n};\r\n\r\nexport const renderNewImages = (node, images) => {\r\n  removeInnerHTMLElement(node);\r\n\r\n  if (images && images.length) {\r\n    renderImages(node, images);\r\n  }\r\n};\r\n\r\nexport const renderLoader = node => {\r\n  const content = `\r\n    <div class=\"loader-wrapper hidden\">\r\n      <div class=\"loading \">Loading images, please wait...</div>\r\n      <span class=\"loader\"></span>\r\n    </div>\r\n  `;\r\n\r\n  renderHTMLElement(node, content);\r\n};\r\n\r\nexport const renderButton = node => {\r\n  const content = `\r\n    <button type=\"button\" class=\"button load-more hidden\">Load more</button>\r\n  `;\r\n\r\n  renderHTMLElement(node, content);\r\n};\r\n","import axios from 'axios';\r\nimport iziToast from 'izitoast';\r\n\r\nconst API_KEY = '45273601-269fa7243c6da01438f09c62a';\r\n\r\nconst axiosInstance = axios.create({\r\n  baseURL: 'https://pixabay.com/api',\r\n  params: {\r\n    key: API_KEY,\r\n  },\r\n});\r\n\r\nexport const getImagesFromAPI = async (\r\n  searchQuery,\r\n  page = 1,\r\n  per_page = 15\r\n) => {\r\n  try {\r\n    const { data } = await axiosInstance.get('/', {\r\n      params: {\r\n        q: searchQuery,\r\n        image_type: 'photo',\r\n        orientation: 'horizontal',\r\n        page,\r\n        per_page,\r\n      },\r\n    });\r\n    return {\r\n      images: data.hits,\r\n      total: data.totalHits,\r\n    };\r\n  } catch (error) {\r\n    iziToast.error({\r\n      icon: '',\r\n      iconText: '',\r\n      title: '❌ Error',\r\n      message: `Error while fetching images. Please try again! ${error}`,\r\n    });\r\n    return {\r\n      images: [],\r\n      total: 0,\r\n    };\r\n  }\r\n};\r\n","import iziToast from 'izitoast';\r\nimport SimpleLightbox from 'simplelightbox';\r\n\r\nimport { renderNewImages, renderImages } from './js/render-functions.js';\r\n\r\nimport { getImagesFromAPI } from './js/pixabay-api.js';\r\n\r\nimport 'izitoast/dist/css/iziToast.min.css';\r\nimport 'simplelightbox/dist/simple-lightbox.min.css';\r\n\r\n// Налаштування iziToast\r\niziToast.settings({\r\n  timeout: 3000,\r\n});\r\n\r\n// Ініціалізація галереї\r\nconst gallery = new SimpleLightbox('.gallery a', {\r\n  captionDelay: 250,\r\n  captionsData: 'alt',\r\n});\r\n\r\n// Глобальні змінні\r\nconst images = [];\r\nlet query = '';\r\nlet page = 1;\r\n\r\n// Повідомлення про кінець результатів\r\nconst searchResultsWarning = () => {\r\n  iziToast.warning({\r\n    title: '⚠️ Warning',\r\n    message: \"We're sorry, but you've reached the end of search results.\",\r\n  });\r\n};\r\n\r\n// Скидання стану\r\nconst resetGallery = () => {\r\n  images.length = 0;\r\n  page = 1;\r\n  const galleryContainer = document.querySelector('#gallery');\r\n  galleryContainer.innerHTML = '';\r\n};\r\n\r\n// Обробка пошукової форми\r\nconst onSubmitSearchFormHandler = async (event, form) => {\r\n  event.preventDefault();\r\n  query = form.elements.search.value.trim();\r\n  const loader = document.querySelector('.loader-wrapper');\r\n  const button = document.querySelector('.load-more');\r\n  const galleryContainer = document.querySelector('#gallery');\r\n\r\n  if (!query) {\r\n    iziToast.warning({\r\n      title: '⚠️ Warning',\r\n      message: 'Please enter a search query!',\r\n    });\r\n    return;\r\n  }\r\n\r\n  loader.classList.remove('hidden');\r\n  button.classList.add('hidden');\r\n  resetGallery();\r\n\r\n  try {\r\n    const { images: newImages, total } = await getImagesFromAPI(query, page);\r\n\r\n    if (newImages.length) {\r\n      images.push(...newImages);\r\n      renderNewImages(galleryContainer, newImages);\r\n      gallery.refresh();\r\n\r\n      if (images.length < total) {\r\n        button.classList.remove('hidden');\r\n      } else {\r\n        searchResultsWarning();\r\n      }\r\n    } else {\r\n      iziToast.error({\r\n        title: '❌ Error',\r\n        message:\r\n          'Sorry, there are no images matching your search query. Please try again!',\r\n      });\r\n    }\r\n  } catch (error) {\r\n    iziToast.error({\r\n      title: '❌ Error',\r\n      message: 'Something went wrong. Please try again later.',\r\n    });\r\n    console.error(error);\r\n  } finally {\r\n    loader.classList.add('hidden');\r\n    form.reset();\r\n  }\r\n};\r\n\r\n// Завантаження додаткових зображень\r\nconst onLoadImagesHandler = async button => {\r\n  const loader = document.querySelector('.loader-wrapper');\r\n  const galleryContainer = document.querySelector('#gallery');\r\n\r\n  button.classList.add('hidden');\r\n  loader.classList.remove('hidden');\r\n\r\n  try {\r\n    const { images: newImages, total } = await getImagesFromAPI(query, ++page);\r\n\r\n    if (newImages.length) {\r\n      images.push(...newImages);\r\n      renderImages(galleryContainer, newImages);\r\n      gallery.refresh();\r\n\r\n      if (images.length < total) {\r\n        button.classList.remove('hidden');\r\n      } else {\r\n        searchResultsWarning();\r\n      }\r\n\r\n      const firstNewImage = document.querySelector('.gallery-item');\r\n      if (firstNewImage) {\r\n        const height = firstNewImage.getBoundingClientRect().height;\r\n        window.scrollBy({\r\n          top: height * 2,\r\n          behavior: 'smooth',\r\n        });\r\n      }\r\n    } else {\r\n      searchResultsWarning();\r\n    }\r\n  } catch (error) {\r\n    iziToast.error({\r\n      title: '❌ Error',\r\n      message: 'Failed to load images. Please try again.',\r\n    });\r\n    console.error(error);\r\n  } finally {\r\n    loader.classList.add('hidden');\r\n  }\r\n};\r\n\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n  const form = document.querySelector('#search-form');\r\n  const button = document.querySelector('.load-more');\r\n\r\n  form.addEventListener('submit', async event => {\r\n    await onSubmitSearchFormHandler(event, form);\r\n  });\r\n\r\n  button.addEventListener('click', async () => {\r\n    await onLoadImagesHandler(button);\r\n  });\r\n});\r\n"],"names":["renderHTMLElement","node","content","position","removeInnerHTMLElement","renderGalleryItems","images","image","renderImages","renderNewImages","API_KEY","axiosInstance","axios","getImagesFromAPI","searchQuery","page","per_page","data","error","iziToast","gallery","SimpleLightbox","query","searchResultsWarning","resetGallery","galleryContainer","onSubmitSearchFormHandler","event","form","loader","button","newImages","total","onLoadImagesHandler","firstNewImage","height"],"mappings":"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"}