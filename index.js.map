{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["const renderHTMLElement = (node, content, position = 'beforeend') => {\r\n  node.insertAdjacentHTML(position, content);\r\n};\r\n\r\nconst removeInnerHTMLElement = (node) => {\r\n  node.innerHTML = '';\r\n};\r\n\r\nexport const renderSearchForm = (node) => {\r\n  const content = `\r\n    <form class=\"search-form\" id=\"search-form\">\r\n      <input\r\n        type=\"text\"\r\n        name=\"search\"\r\n        autocomplete=\"off\"\r\n        placeholder=\"Search images...\"\r\n      />\r\n      <button type=\"submit\" class=\"button\">Search</button>\r\n    </form>\r\n  `;\r\n\r\n  renderHTMLElement(node, content);\r\n};\r\n\r\nexport const renderGalleryWrapper = (node) => {\r\n  const content = `<div class=\"gallery\" id=\"gallery\"></div>`;\r\n\r\n  renderHTMLElement(node, content);\r\n};\r\n\r\nexport const renderGalleryItems = (node, images) => {\r\n  const content = images.map((image) => `\r\n    <div class=\"gallery-item\">\r\n      <a href=\"${image.largeImageURL}\">\r\n        <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" loading=\"lazy\" />\r\n      </a>\r\n      <div class=\"gallery-item-info\">\r\n        <div>\r\n          <b>Likes</b>\r\n          ${image.likes}\r\n        </div>\r\n        <div>\r\n          <b>Views</b>\r\n          ${image.views}\r\n        </div>\r\n        <div>\r\n          <b>Comments</b>\r\n          ${image.comments}\r\n        </div>\r\n        <div>\r\n          <b>Downloads</b>\r\n          ${image.downloads}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  `)\r\n  .join('');\r\n\r\n  renderHTMLElement(node, content);\r\n};\r\n\r\nexport const renderImages = (node, images) => {\r\n  renderGalleryItems(node, images);\r\n}\r\n\r\nexport const renderNewImages = (node, images) => {\r\n  removeInnerHTMLElement(node);\r\n\r\n  if (images && images.length) {\r\n    renderImages(node, images);\r\n  }\r\n};\r\n\r\nexport const renderLoader = (node) => {\r\n  const content = `\r\n    <div class=\"loader-wrapper hidden\">\r\n      <div class=\"loading \">Loading images, please wait...</div>\r\n      <span class=\"loader\"></span>\r\n    </div>\r\n  `;\r\n\r\n  renderHTMLElement(node, content);\r\n};\r\n\r\nexport const renderButton = (node) => {\r\n  const content = `\r\n    <button type=\"button\" class=\"button load-more hidden\">Load more</button>\r\n  `;\r\n\r\n  renderHTMLElement(node, content);\r\n}","import axios from 'axios';\r\nimport iziToast from 'izitoast';\r\n\r\nconst API_KEY = '45273601-269fa7243c6da01438f09c62a';\r\n\r\nconst axiosInstance = axios.create({\r\n  baseURL: 'https://pixabay.com/api',\r\n  params: {\r\n    key: API_KEY,\r\n  },\r\n});\r\n\r\nexport const getImagesFromAPI = async (\r\n  searchQuery,\r\n  page = 1,\r\n  per_page = 15\r\n) => {\r\n  try {\r\n    const { data } = await axiosInstance.get('/', {\r\n      params: {\r\n        q: searchQuery,\r\n        image_type: 'photo',\r\n        orientation: 'horizontal',\r\n        page,\r\n        per_page,\r\n      },\r\n    });\r\n    return {\r\n      images: data.hits,\r\n      total: data.totalHits,\r\n    };\r\n  } catch (error) {\r\n    iziToast.error({\r\n      icon: '',\r\n      iconText: '',\r\n      title: '❌ Error',\r\n      message: `Error while fetching images. Please try again! ${error}`,\r\n    });\r\n    return {\r\n      images: [],\r\n      total: 0,\r\n    };\r\n  }\r\n};\r\n","import iziToast from 'izitoast';\r\nimport SimpleLightbox from 'simplelightbox';\r\n\r\nimport {\r\n  renderSearchForm,\r\n  renderNewImages,\r\n  renderGalleryWrapper,\r\n  renderLoader,\r\n  renderButton, renderImages,\r\n} from './js/render-functions.js';\r\nimport { getImagesFromAPI } from './js/pixabay-api.js';\r\n\r\nimport 'izitoast/dist/css/iziToast.min.css';\r\nimport 'simplelightbox/dist/simple-lightbox.min.css';\r\n\r\niziToast.settings({\r\n  timeout: 3000,\r\n});\r\n\r\nconst gallery = new SimpleLightbox('#gallery a', {\r\n  captionDelay: 250,\r\n  captionsData: 'alt',\r\n});\r\n\r\nconst images = [];\r\nlet query = '';\r\nlet page = 1;\r\n\r\nconst searchResultsWarning = () => {\r\n  iziToast.warning({\r\n    icon: '',\r\n    iconText: '',\r\n    title: '⚠️ Warning',\r\n    message: \"We're sorry, but you've reached the end of search results.\",\r\n  });\r\n}\r\n\r\nconst resetGallery = () => {\r\n  images.length = 0;\r\n  page = 1;\r\n}\r\n\r\nconst onSubmitSearchFormHandler = async (event, form) => {\r\n  event.preventDefault();\r\n  query = form.elements.search.value;\r\n  const loader = document.querySelector('.loader-wrapper');\r\n\r\n  if (query.trim() !== '') {\r\n    const galleryContainer = document.querySelector('#gallery');\r\n    loader.classList.remove('hidden');\r\n    resetGallery();\r\n\r\n    const { images: newImages, total } = await getImagesFromAPI(query, page);\r\n\r\n    renderNewImages(galleryContainer, newImages);\r\n\r\n    if (newImages.length) {\r\n      const button = document.querySelector('.load-more');\r\n      images.push(...newImages);\r\n\r\n      if (newImages.length >= total) {\r\n        searchResultsWarning();\r\n        button.classList.add('hidden');\r\n      } else {\r\n        button.classList.remove('hidden');\r\n      }\r\n      gallery.refresh();\r\n    } else {\r\n      iziToast.error({\r\n        icon: '',\r\n        iconText: '',\r\n        title: '❌ Error',\r\n        message: 'Sorry, there are no images matching your search query. Please try again!',\r\n      });\r\n    }\r\n  } else {\r\n    iziToast.warning({\r\n      icon: '',\r\n      iconText: '',\r\n      title: '⚠️ Warning',\r\n      message: 'Please enter a search query!',\r\n    });\r\n  }\r\n\r\n  loader.classList.add('hidden');\r\n  form.reset();\r\n};\r\n\r\nconst onLoadImagesHandler = async (button) => {\r\n  const loader = document.querySelector('.loader-wrapper');\r\n  const galleryContainer = document.querySelector('#gallery');\r\n\r\n  button.classList.add('hidden');\r\n  loader.classList.remove('hidden');\r\n\r\n  const { images: newImages, total } = await getImagesFromAPI(query, page += 1);\r\n  images.push(...newImages);\r\n\r\n  renderImages(galleryContainer, newImages);\r\n  gallery.refresh();\r\n\r\n  if (images.length >= total || newImages.length === 0) {\r\n    searchResultsWarning();\r\n  } else {\r\n    button.classList.remove('hidden');\r\n  }\r\n\r\n  if (newImages.length !== 0) {\r\n    const image = document.querySelector('.gallery-item');\r\n    if (image) {\r\n      const height = image.getBoundingClientRect().height;\r\n      window.scrollBy({\r\n        top: height * 2,\r\n        behavior: 'smooth',\r\n      });\r\n    }\r\n  }\r\n\r\n  loader.classList.add('hidden');\r\n};\r\n\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n  const root = document.getElementById('root');\r\n\r\n  renderSearchForm(root);\r\n  renderGalleryWrapper(root);\r\n  renderLoader(root);\r\n  renderButton(root);\r\n\r\n  const form = document.querySelector('#search-form');\r\n\r\n  form.addEventListener('submit', async (event) => {\r\n    await onSubmitSearchFormHandler(event, form);\r\n  });\r\n\r\n  const button = document.querySelector('.load-more');\r\n\r\n  button.addEventListener('click', async () => {\r\n    await onLoadImagesHandler(button);\r\n  });\r\n});"],"names":["renderHTMLElement","node","content","position","removeInnerHTMLElement","renderSearchForm","renderGalleryWrapper","renderGalleryItems","images","image","renderImages","renderNewImages","renderLoader","renderButton","API_KEY","axiosInstance","axios","getImagesFromAPI","searchQuery","page","per_page","data","error","iziToast","gallery","SimpleLightbox","query","searchResultsWarning","resetGallery","onSubmitSearchFormHandler","event","form","loader","galleryContainer","newImages","total","button","onLoadImagesHandler","height","root"],"mappings":"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"}